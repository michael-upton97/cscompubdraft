!function(a){var o,s,t=1e3*ina_meta_data.ina_timeout,c=0,r={},u=10,d={onReady:function(){this.setupDOM(),this.eventListeners()},setupDOM:function(){r.stayLoggedIn=a(".ina_stay_logged_in"),r.popupBG=a(".ina__no_confict_popup_bg"),r.msg_box=a("#ina__dp_logout_message_box"),r.msg_boxBody=a("#ina__dp_logout_message_box .ina-dp-noflict-modal-body"),r.countdown=a(".ina_countdown")},eventListeners:function(){a(document).on("mousemove",this.resetTimer),a(document).on("mousedown",this.resetTimer),a(document).on("keypress",this.resetTimer),a(document).on("DOMMouseScroll",this.resetTimer),a(document).on("mousewheel",this.resetTimer),a(document).on("touchmove",this.resetTimer),a(document).on("MSPointerMove",this.resetTimer),a(window).on("load",this.resetTimer),r.stayLoggedIn.on("click",this.stayLoggedInWarnMsg)},resetTimer:function(){window.clearTimeout(o),window.clearTimeout(void 0),localStorage.setItem("ina__browserTabID",void 0);try{d.goActive()}catch(o){TypeError,console.log(o,!0)}},startTimer:function(){o=window.setTimeout(this.goInactive,11e3)},goActive:function(){try{this.startTimer()}catch(o){TypeError,console.log(o,!0)}},goInactive:function(){if(0===c){var o=Date.now(),n=Math.floor(o/1e3),e={action:"ina_checklastSession",do:"ina_updateLastSession",security:ina_ajax.ina_security,timestamp:n};a.post(ina_ajax.ajaxurl,e).done(function(o){var n=document.activeElement;n&&"IFRAME"===n.tagName&&this.resetTimer(),window.setTimeout(d.showTimeoutMessage,t)})}},showTimeoutMessage:function(){var n,o=ina_meta_data.ina_disable_countdown,e=ina_meta_data.ina_warn_message_enabled;if(document.onkeydown=function(o){if(116!=(o.charCode||o.keyCode))return!1},window.oncontextmenu=function(){return!1},r.popupBG.data("bgenabled")){var t=r.popupBG.data("bg");r.msg_box.css("background",t)}if(c=1,e)r.msg_box.show();else if(o){var i={action:"ina_checklastSession",do:"ina_logout",security:ina_ajax.ina_security};a.post(ina_ajax.ajaxurl,i).done(function(o){return o.redirect_url?(r.msg_box.show(),r.msg_boxBody.html("<p>"+o.msg+"<p>"),d.logout_now(o.redirect_url)):(r.msg_box.show(),r.msg_boxBody.html("<p>"+o.msg+'<p><p class="ina-dp-noflict-btn-container"><a class="btn-timeout" href="javascript:void(0);" onclick="window.location.reload();">OK</a></p>'),d.logout_now(!1)),!1})}else r.msg_box.show(),s=setInterval(function(){if(0<=u&&(n=u--,r.countdown.html("("+n+")")),0===n){clearTimeout(s);var o={action:"ina_checklastSession",do:"ina_logout",security:ina_ajax.ina_security};a.post(ina_ajax.ajaxurl,o).done(function(o){return o.redirect_url?(r.msg_boxBody.html("<p>"+o.msg+"<p>"),d.logout_now(o.redirect_url)):(r.msg_boxBody.html("<p>"+o.msg+'<p><p class="ina-dp-noflict-btn-container"><a class="btn-timeout" href="javascript:void(0);" onclick="window.location.reload();">OK</a></p>'),d.logout_now(!1)),!1})}},1e3)},stayLoggedInWarnMsg:function(){document.onkeydown=function(o){return!0},window.oncontextmenu=null,clearTimeout(s),u=10,c=0,r.msg_box.hide(),r.countdown.text("")},logout_now:function(o){var n={action:"ina_logout_session",security:ina_ajax.ina_security};a.post(ina_ajax.ajaxurl,n).done(function(){o&&(window.location=o),console.log("Session Logged Out !!")})}};a(function(){d.onReady()})}(jQuery);